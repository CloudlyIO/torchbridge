{
  "displayName": "TorchBridge Cloud Testing - GCP",
  "dashboardFilters": [],
  "mosaicLayout": {
    "columns": 12,
    "tiles": [
      {
        "xPos": 0,
        "yPos": 0,
        "width": 12,
        "height": 1,
        "widget": {
          "title": "TorchBridge Cloud Testing Dashboard - GCP",
          "text": {
            "content": "# TorchBridge Cloud Testing Dashboard\n\nMonitoring NVIDIA A3/A2 instances and TPU v5e/v6e performance.",
            "format": "MARKDOWN"
          }
        }
      },
      {
        "xPos": 0,
        "yPos": 1,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "GPU Utilization",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/gpu_utilization\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE"
              }
            ],
            "yAxis": {
              "label": "Utilization %",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 6,
        "yPos": 1,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "GPU Memory Usage",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/gpu_memory_used\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE"
              }
            ],
            "yAxis": {
              "label": "Memory GB",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 0,
        "yPos": 5,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Test Pass Rate",
          "scorecard": {
            "timeSeriesQuery": {
              "timeSeriesFilter": {
                "filter": "metric.type=\"custom.googleapis.com/torchbridge/test_pass_rate\"",
                "aggregation": {
                  "alignmentPeriod": "300s",
                  "perSeriesAligner": "ALIGN_MEAN"
                }
              }
            },
            "gaugeView": {
              "lowerBound": 0,
              "upperBound": 100
            },
            "thresholds": [
              {
                "value": 90,
                "color": "GREEN",
                "direction": "ABOVE"
              },
              {
                "value": 70,
                "color": "YELLOW",
                "direction": "ABOVE"
              },
              {
                "value": 0,
                "color": "RED",
                "direction": "ABOVE"
              }
            ]
          }
        }
      },
      {
        "xPos": 4,
        "yPos": 5,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Inference Latency (ms)",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/inference_latency_p50\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE",
                "legendTemplate": "P50"
              },
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/inference_latency_p95\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE",
                "legendTemplate": "P95"
              },
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/inference_latency_p99\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE",
                "legendTemplate": "P99"
              }
            ]
          }
        }
      },
      {
        "xPos": 8,
        "yPos": 5,
        "width": 4,
        "height": 4,
        "widget": {
          "title": "Throughput (samples/sec)",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/throughput\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE"
              }
            ]
          }
        }
      },
      {
        "xPos": 0,
        "yPos": 9,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "TPU Performance",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/tpu_utilization\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE",
                "legendTemplate": "TPU Utilization"
              },
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/tpu_hbm_usage\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE",
                "legendTemplate": "HBM Usage %"
              }
            ],
            "yAxis": {
              "label": "Percentage",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 6,
        "yPos": 9,
        "width": 6,
        "height": 4,
        "widget": {
          "title": "XLA Compilation Time",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/xla_compilation_time\"",
                    "aggregation": {
                      "alignmentPeriod": "60s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                },
                "plotType": "LINE"
              }
            ],
            "yAxis": {
              "label": "Time (seconds)",
              "scale": "LINEAR"
            }
          }
        }
      },
      {
        "xPos": 0,
        "yPos": 13,
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Cost Tracking (USD/hour)",
          "xyChart": {
            "dataSets": [
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/cost_per_hour\" resource.label.\"machine_type\"=\"a2-highgpu-1g\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_SUM"
                    }
                  }
                },
                "plotType": "STACKED_BAR",
                "legendTemplate": "A2 (A100)"
              },
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/cost_per_hour\" resource.label.\"machine_type\"=\"a3-highgpu-8g\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_SUM"
                    }
                  }
                },
                "plotType": "STACKED_BAR",
                "legendTemplate": "A3 (H100)"
              },
              {
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/torchbridge/cost_per_hour\" resource.label.\"accelerator_type\"=\"v5litepod-8\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_SUM"
                    }
                  }
                },
                "plotType": "STACKED_BAR",
                "legendTemplate": "TPU v5e-8"
              }
            ]
          }
        }
      }
    ]
  }
}
